<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mersin Arazi Nitelik Tablosu</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .table-container {
            max-height: 60vh;
            overflow-y: auto;
        }
        /* Custom scrollbar for better aesthetics */
        .table-container::-webkit-scrollbar {
            width: 8px;
        }
        .table-container::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        .table-container::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        .table-container::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto p-4 md:p-8">
        
        <!-- Başlık Bölümü -->
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-700">MERSİN İLİ ARAZİ NİTELİK TABLOSU</h1>
            <p class="text-gray-500 mt-2">İlçe seçerek arazi niteliklerini arayın, filtreleyin ve özet bilgileri görüntüleyin.</p>
        </header>

        <!-- Filtreleme ve Özet Kartları -->
        <div class="mb-6 grid grid-cols-1 md:grid-cols-4 gap-6">
            <!-- İlçe Seçimi -->
            <div class="md:col-span-1 bg-white p-4 rounded-xl shadow-md">
                <label for="ilce-select" class="block text-sm font-medium text-gray-600 mb-2">İlçe Seçin:</label>
                <select id="ilce-select" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition"></select>
            </div>
            <!-- Arama Kutusu -->
            <div class="md:col-span-1 bg-white p-4 rounded-xl shadow-md">
                <label for="search-input" class="block text-sm font-medium text-gray-600 mb-2">Nitelik veya Kod ile Ara:</label>
                <input type="text" id="search-input" placeholder="Örn: Orman, TEOY..." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition">
            </div>
            <!-- Ekonomik Değeri Olan Toplam Alan -->
            <div class="bg-white p-4 rounded-xl shadow-md flex flex-col justify-center items-center text-center">
                <h3 class="text-lg font-semibold text-green-600">Ekonomik Değeri Olan Toplam Alan</h3>
                <p id="ekonomik-var-toplam" class="text-2xl font-bold text-gray-800 mt-2">0 m²</p>
            </div>
            <!-- Ekonomik Değeri Olmayan Toplam Alan -->
            <div class="bg-white p-4 rounded-xl shadow-md flex flex-col justify-center items-center text-center">
                <h3 class="text-lg font-semibold text-red-600">Ekonomik Değeri Olmayan Toplam Alan</h3>
                <p id="ekonomik-yok-toplam" class="text-2xl font-bold text-gray-800 mt-2">0 m²</p>
            </div>
        </div>

        <!-- Tablo Bölümü -->
        <div class="bg-white rounded-xl shadow-md overflow-hidden">
            <div class="table-container">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-100 sticky top-0">
                        <tr>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Nitelik</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Kod</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Ekonomik Değeri</th>
                            <th scope="col" class="px-6 py-3 text-right text-xs font-bold text-gray-600 uppercase tracking-wider">Yüzölçüm (m²)</th>
                            <th scope="col" class="px-6 py-3 text-right text-xs font-bold text-gray-600 uppercase tracking-wider">Yüzölçüm (ha)</th>
                        </tr>
                    </thead>
                    <tbody id="data-table" class="bg-white divide-y divide-gray-200">
                        <!-- Veriler JavaScript ile buraya eklenecek -->
                        <tr>
                            <td colspan="5" class="px-6 py-12 text-center text-gray-500">
                                Veriler yükleniyor...
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <footer class="text-center mt-8 text-sm text-gray-400">
            <p>Bu uygulama Gemini tarafından oluşturulmuştur.</p>
        </footer>

    </div>

    <script>
        // Niteliklerin kod ve ekonomik değer bilgilerini içeren harita.
        const nitelikBilgiMap = new Map([
            ['Tarıma Elverişli Olmayan Yer', { kod: 'TEOY', ekonomikDegeri: 'VAR' }],
            ['Kaya', { kod: 'KAYA', ekonomikDegeri: 'YOK' }],
            ['Tepe', { kod: 'TEPE', ekonomikDegeri: 'VAR' }],
            ['Dağ', { kod: 'DAG', ekonomikDegeri: 'YOK' }],
            ['Orman', { kod: 'ORM', ekonomikDegeri: 'YOK' }],
            ['Yol', { kod: 'YOL', ekonomikDegeri: 'YOK' }],
            ['Dere', { kod: 'DERE', ekonomikDegeri: 'YOK' }],
            ['Park', { kod: 'PRK', ekonomikDegeri: 'VAR' }],
            ['Meydan', { kod: 'MYD', ekonomikDegeri: 'VAR' }],
            ['Köprü', { kod: 'KPR', ekonomikDegeri: 'YOK' }],
            ['Deniz', { kod: 'DNZ', ekonomikDegeri: 'YOK' }],
            ['Göl', { kod: 'GOL', ekonomikDegeri: 'YOK' }],
            ['Nehir', { kod: 'NHR', ekonomikDegeri: 'YOK' }],
            ['Çalılık', { kod: 'CALI', ekonomikDegeri: 'VAR' }],
            ['Fundaluk', { kod: 'FND', ekonomikDegeri: 'VAR' }],
            ['Sarı Alan Arazisi', { kod: 'SAA', ekonomikDegeri: 'VAR' }],
            ['Yunak', { kod: 'YNK', ekonomikDegeri: 'VAR' }],
            ['Mezarlık', { kod: 'MZR', ekonomikDegeri: 'YOK' }],
            ['Kuyu', { kod: 'KY', ekonomikDegeri: 'YOK' }],
            ['Çeşme', { kod: 'CSM', ekonomikDegeri: 'YOK' }],
            ['Namazgah', { kod: 'NMZ', ekonomikDegeri: 'YOK' }],
            ['Cami', { kod: 'CAMI', ekonomikDegeri: 'YOK' }],
            ['Köy Odası', { kod: 'KO', ekonomikDegeri: 'YOK' }],
            ['Pazar Yeri', { kod: 'PY', ekonomikDegeri: 'VAR' }],
            ['Ark', { kod: 'ARK', ekonomikDegeri: 'YOK' }],
            ['Kanal', { kod: 'KNL', ekonomikDegeri: 'YOK' }],
            ['Aklan', { kod: 'AKLN', ekonomikDegeri: 'YOK' }],
            ['Taşlık', { kod: 'TSLK', ekonomikDegeri: 'VAR' }],
            ['Çay', { kod: 'CAY', ekonomikDegeri: 'YOK' }],
            ['Su Deposu', { kod: 'SD', ekonomikDegeri: 'YOK' }],
            ['Köy Boşluğu', { kod: 'KB', ekonomikDegeri: 'VAR' }],
            ['Tampon Bölge', { kod: 'TB', ekonomikDegeri: 'VAR' }],
            ['Kadastrosu Yapılmamış Alan', { kod: 'KYA', ekonomikDegeri: 'VAR' }],
            ['Yol Fazlası', { kod: 'YF', ekonomikDegeri: 'VAR' }],
            ['Kumluk', { kod: 'KMLK', ekonomikDegeri: 'VAR' }],
            ['Ham Toprak', { kod: 'HT', ekonomikDegeri: 'VAR' }],
            ['Hali Arazi', { kod: 'HA', ekonomikDegeri: 'VAR' }],
            ['Yamaç', { kod: 'YMC', ekonomikDegeri: 'YOK' }],
            ['Kenarlaşma Sorunu', { kod: 'KS', ekonomikDegeri: 'VAR' }],
            ['Davalı/Tescilsiz Parsel', { kod: 'DTA', ekonomikDegeri: 'VAR' }],
            ['Belediye Hizmet Alanı', { kod: 'BHA', ekonomikDegeri: 'VAR' }],
            ['Yol Boşluğu', { kod: 'YB', ekonomikDegeri: 'VAR' }],
            ['Pınar', { kod: 'PNR', ekonomikDegeri: 'YOK' }],
            ['Koru', { kod: 'KORU', ekonomikDegeri: 'VAR' }],
            ['Baraj', { kod: 'BRJ', ekonomikDegeri: 'YOK' }],
            ['Hendek', { kod: 'HNDK', ekonomikDegeri: 'VAR' }],
            ['Kıraç Arazi', { kod: 'KA', ekonomikDegeri: 'VAR' }],
            ['Çatak', { kod: 'ÇTK', ekonomikDegeri: 'VAR' }],
            ['Bayır', { kod: 'BYR', ekonomikDegeri: 'VAR' }],
            ['Yeşil Alan', { kod: 'YA', ekonomikDegeri: 'VAR' }],
            ['Otopark', { kod: 'OTP', ekonomikDegeri: 'VAR' }],
            ['Harman Yeri', { kod: 'HY', ekonomikDegeri: 'VAR' }],
            ['Trafo Yeri', { kod: 'TY', ekonomikDegeri: 'YOK' }],
            ['Sulama Hattı', { kod: 'SH', ekonomikDegeri: 'YOK' }],
            ['Kıyı', { kod: 'KIYI', ekonomikDegeri: 'VAR' }],
            ['Sağlık Koruma Bandı', { kod: 'SKB', ekonomikDegeri: 'VAR' }],
            ['Obuz', { kod: 'OBZ', ekonomikDegeri: 'VAR' }],
            ['Değirmen Bendi', { kod: 'DB', ekonomikDegeri: 'VAR' }],
            ['2B Alanı', { kod: 'IKIB', ekonomikDegeri: 'VAR' }],
            ['Kesik', { kod: 'KSK', ekonomikDegeri: 'VAR' }],
            ['Sazlık/Bataklık', { kod: 'SZBT', ekonomikDegeri: 'VAR' }],
            ['Irmak', { kod: 'IRMK', ekonomikDegeri: 'YOK' }],
            ['Devlet Hükmü ve Tasarrufu Altındaki Yerler', { kod: 'DHTA', ekonomikDegeri: 'VAR' }],
            ['Ağaçlık', { kod: 'AGC', ekonomikDegeri: 'VAR' }],
            ['Tonç', { kod: 'TONC', ekonomikDegeri: 'VAR' }],
            ['Pilon Yeri', { kod: 'PY', ekonomikDegeri: 'YOK' }],
            ['Yar', { kod: 'YAR', ekonomikDegeri: 'YOK' }],
            ['Mera', { kod: 'MERA', ekonomikDegeri: 'VAR' }],
            ['Rezerv Alan', { kod: 'RA', ekonomikDegeri: 'VAR' }],
            ['Geometrisi Tespit Edilemeyen Parsel', { kod: 'GTEP', ekonomikDegeri: 'VAR' }],
            ['Pırnallık', { kod: 'PRNL', ekonomikDegeri: 'VAR' }],
            ['Su Kaynağı', { kod: 'SK', ekonomikDegeri: 'VAR' }],
            ['Ağaçlandırılacak Alan', { kod: 'AA', ekonomikDegeri: 'VAR' }],
            ['Su Yolu', { kod: 'SY', ekonomikDegeri: 'YOK' }],
            ['Akıntı', { kod: 'AKNT', ekonomikDegeri: 'YOK' }],
            ['Demiryolu', { kod: 'DY', ekonomikDegeri: 'YOK' }],
            ['Tump', { kod: 'TUMP', ekonomikDegeri: 'VAR' }],
            ['Dekovil', { kod: 'DKVL', ekonomikDegeri: 'YOK' }],
            // The raw data might contain items not in this list, they will get a default code
            ['Çocuk Bahçesi', { kod: 'ÇB', ekonomikDegeri: 'VAR' }],
            ['Otoyol', { kod: 'OTOYOL', ekonomikDegeri: 'YOK' }],
            ['Spor Tesisi Alanı', { kod: 'STA', ekonomikDegeri: 'VAR' }],
            ['Şev', { kod: 'ŞEV', ekonomikDegeri: 'YOK' }],
            ['Teknik Altyapı Alanı', { kod: 'TAA', ekonomikDegeri: 'VAR' }]
        ]);

        // İstenen özel sıralama için nitelik listesi
        const nitelikSiralama = [
            'Tarıma Elverişli Olmayan Yer', 'Kaya', 'Tepe', 'Dağ', 'Orman', 'Yol', 'Dere', 'Park', 'Meydan', 'Köprü',
            'Deniz', 'Göl', 'Nehir', 'Çalılık', 'Fundaluk', 'Sarı Alan Arazisi', 'Yunak', 'Mezarlık', 'Kuyu', 'Çeşme',
            'Namazgah', 'Cami', 'Köy Odası', 'Pazar Yeri', 'Ark', 'Kanal', 'Aklan', 'Taşlık', 'Çay', 'Su Deposu',
            'Köy Boşluğu', 'Tampon Bölge', 'Kadastrosu Yapılmamış Alan', 'Yol Fazlası', 'Kumluk', 'Ham Toprak', 'Hali Arazi',
            'Yamaç', 'Kenarlaşma Sorunu', 'Davalı/Tescilsiz Parsel', 'Belediye Hizmet Alanı', 'Yol Boşluğu', 'Pınar',
            'Koru', 'Baraj', 'Hendek', 'Kıraç Arazi', 'Çatak', 'Bayır', 'Yeşil Alan', 'Otopark', 'Harman Yeri',
            'Trafo Yeri', 'Sulama Hattı', 'Kıyı', 'Sağlık Koruma Bandı', 'Obuz', 'Değirmen Bendi', '2B Alanı',
            'Kesik', 'Sazlık/Bataklık', 'Irmak', 'Devlet Hükmü ve Tasarrufu Altındaki Yerler', 'Ağaçlık', 'Tonç',
            'Pilon Yeri', 'Yar', 'Mera', 'Rezerv Alan', 'Geometrisi Tespit Edilemeyen Parsel', 'Pırnallık', 'Su Kaynağı',
            'Ağaçlandırılacak Alan', 'Su Yolu', 'Akıntı', 'Demiryolu', 'Tump', 'Dekovil'
        ];


        const ilceVerileriRaw = `
Nitelik	AKDENİZ	ANAMUR	AYDINCIK	BOZYAZI	ÇAMLIYAYLA	ERDEMLİ	GÜLNAR	MEZİTLİ	MUT	SİLİFKE	TARSUS	TOROSLAR	YENİŞEHİR	Genel Toplam
2B Alanı	0	440		57		3	5	0		38		1	1	545
Ağaçlandırılacak Alan											1		0	1
Ağaçlık	61	44		0		42				10	24	3		184
Ark	9	3	3	1		36	1	11	20	30	42	4	3	163
Baraj		0									8			8
Belediye Hizmet Alanı		0				1		8		3	1	0	8	21
Cami								2		1	2		1	6
Çalılık	26	1		4	3	12	0	1	2	86	263	55	514	967
Çay	178	30				50					80	3		341
Çeşme										0				0
Çocuk Bahçesi		0												0
Dağ													0	0
Davalı/Tescilsiz Parsel				8		1			0				0	9
Demiryolu	0										15			15
Deniz	19	6				7	45			3				80
Dere	317	588	89	125	67	726	371	296	1278	526	1239	459	140	6221
Devlet Hükmü ve Tasarrufu Altındaki Yerler	26					1		2		1	1	7		38
Fundaluk	1									0				1
Geometrisi Tespit Edilemeyen Parsel	26	3		2		1	1	14		5	15	14	1	82
Göl						2		0		1411	143	1		1557
Hali Arazi	53	6		1	5	18	6	1		765	304	0	1	1160
Ham Toprak	19	2		0		3		0			114	6	1	145
Hendek						0				11	0	0		11
Irmak		3					57			89	6			155
Kadastrosu Yapılmamış Alan	15	4306		635							72	61		5089
Kanal	12	11	0	9		7	1	2	10	17	154	1	0	224
Kaya	8	0				0		0	4	307	22	4	9	354
Kenarlaşma Sorunu	3					2	1	0		1	2	1	0	10
Kıyı		13				9				0			9	31
Köprü											0			0
Köy Boşluğu	1	0							1	2	1	0		5
Kumluk	1	18					19		247	16	0			301
Kuyu	0								0		0	0		0
Mera									0		0			0
Meydan	0	1				1		2		0	4	0	0	8
Mezarlık									9	0		2	5	16
Nehir									620	402	44			1066
Orman	254	36789	2565	1768	805	74	2603	304	4730	2557	5041	5709	2596	65795
Otopark	0	0		0						0	0	0	1	1
Otoyol											426			426
Park	30	33	1	1	11	84	7	114	26	100	164	93	115	779
Pınar		0							0					0
Pilon Yeri		0						0			2	0	0	2
Rezerv Alan				0										0
Sarı Alan Arazisi	53	1		40		663	11	37	1537	6119	631	169	8	9269
Sazlık/Bataklık	0													0
Spor Tesisi Alanı											0			0
Su Kaynağı												0		0
Su Yolu									0		150			150
Sulama Hattı								1						1
Şev											4			4
Tampon Bölge	7					3		3			12	6	1	32
Tarıma Elverişli Olmayan Yer	5	4	3			2	2		24	50		0		90
Taşlık	92	6			1	1	0	2	6	16	185	45	379	733
Teknik Altyapı Alanı											0			0
Tepe										228	1		0	229
Tonç	1													1
Trafo Yeri						0							0	0
Yamaç		73									1	0		74
Yar						2		1						3
Yeşil Alan	0	2		1	0					3	11	1		18
Yol	1379	1007	256	504	483	2592	1437	788	2230	3043	5004	1789	1071	21583
Yol Boşluğu	0							0		0	44	2	4	50
Yol Fazlası					0						1			1
`;

        // Ham metin verisini işleyip JSON formatına çeviren fonksiyon
        function parseIlceData(rawData) {
            const allData = [];
            const lines = rawData.trim().split('\n');
            const headers = lines[0].split('\t');
            const ilceNames = headers.slice(1);

            for (let i = 1; i < lines.length; i++) {
                const cells = lines[i].split('\t');
                const nitelik = cells[0].trim();
                const bilgi = nitelikBilgiMap.get(nitelik) || { kod: 'BİLİNMİYOR', ekonomikDegeri: 'VAR' };

                for (let j = 1; j < cells.length; j++) {
                    const yuzolcumHa = parseFloat(cells[j]) || 0;
                    allData.push({
                        nitelik: nitelik,
                        ilce: ilceNames[j - 1],
                        kod: bilgi.kod,
                        ekonomikDegeri: bilgi.ekonomikDegeri,
                        yuzolcumM2: yuzolcumHa * 10000,
                        yuzolcumHa: yuzolcumHa
                    });
                }
            }
            return allData;
        }

        document.addEventListener('DOMContentLoaded', () => {
            const tableBody = document.getElementById('data-table');
            const searchInput = document.getElementById('search-input');
            const ilceSelect = document.getElementById('ilce-select');
            const ekonomikVarToplamEl = document.getElementById('ekonomik-var-toplam');
            const ekonomikYokToplamEl = document.getElementById('ekonomik-yok-toplam');

            let allData = [];
            let currentIlce = 'Genel Toplam';

            function formatNumber(num) {
                return new Intl.NumberFormat('tr-TR').format(num);
            }

            function renderTable(data) {
                tableBody.innerHTML = '';
                if (data.length === 0) {
                    tableBody.innerHTML = `<tr><td colspan="5" class="text-center py-12 px-6 text-gray-500">Bu ilçe için veri bulunamadı veya arama sonucu boş.</td></tr>`;
                    return;
                }
                const sortedData = data.filter(item => item.yuzolcumHa > 0).sort((a, b) => {
                    const indexA = nitelikSiralama.indexOf(a.nitelik);
                    const indexB = nitelikSiralama.indexOf(b.nitelik);
                    // If a nitelik is not in the sort list, push it to the end.
                    if (indexA === -1) return 1;
                    if (indexB === -1) return -1;
                    return indexA - indexB;
                });

                sortedData.forEach(item => {
                    const ekonomikDegerClass = item.ekonomikDegeri === 'VAR' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800';
                    const row = `
                        <tr class="hover:bg-gray-50 transition-colors duration-200">
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${item.nitelik}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${item.kod}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm">
                                <span class="px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${ekonomikDegerClass}">${item.ekonomikDegeri}</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-right">${formatNumber(item.yuzolcumM2)}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-right">${formatNumber(item.yuzolcumHa)}</td>
                        </tr>
                    `;
                    tableBody.innerHTML += row;
                });
            }

            function calculateTotals(data) {
                const totals = data.reduce((acc, item) => {
                    if (item.ekonomikDegeri === 'VAR') {
                        acc.var += item.yuzolcumM2;
                    } else {
                        acc.yok += item.yuzolcumM2;
                    }
                    return acc;
                }, { var: 0, yok: 0 });

                ekonomikVarToplamEl.textContent = `${formatNumber(totals.var)} m²`;
                ekonomikYokToplamEl.textContent = `${formatNumber(totals.yok)} m²`;
            }

            function updateView() {
                const searchTerm = searchInput.value.toLowerCase().trim();
                
                let filteredData = allData.filter(item => item.ilce === currentIlce);

                if (searchTerm) {
                    filteredData = filteredData.filter(item =>
                        item.nitelik.toLowerCase().includes(searchTerm) ||
                        item.kod.toLowerCase().includes(searchTerm)
                    );
                }

                renderTable(filteredData);
                calculateTotals(filteredData);
            }
            
            function populateDropdown() {
                 const ilceler = [...new Set(allData.map(item => item.ilce))];
                 const sortedIlceler = ['Genel Toplam', ...ilceler.filter(i => i !== 'Genel Toplam').sort((a,b) => a.localeCompare(b, 'tr'))];
                 sortedIlceler.forEach(ilce => {
                     const option = document.createElement('option');
                     option.value = ilce;
                     option.textContent = ilce;
                     ilceSelect.appendChild(option);
                 });
                 ilceSelect.value = 'Genel Toplam';
            }
            
            ilceSelect.addEventListener('change', (e) => {
                currentIlce = e.target.value;
                searchInput.value = '';
                updateView();
            });

            searchInput.addEventListener('input', updateView);

            function init() {
                allData = parseIlceData(ilceVerileriRaw);
                populateDropdown();
                updateView();
            }
            
            init();
        });
    </script>

</body>
</html>

